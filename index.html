<!-- https://medium.com/swlh/ar-js-the-simplest-way-to-get-cross-browser-augmented-reality-on-the-web-10cbc721debc -->
<!doctype HTML>
<html>

<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <script src="./aframe-master.min.js"></script>
    <script src="./aframe-ar.js"></script>
</head>

<body style='margin : 0px; overflow: hidden;'>
    <!-- we add detectionMode and matrixCodeType to tell AR.js to recognize barcode markers -->
    <a-scene embedded arjs>
        <a-assets>
            <img class="image-sequence" id="cupheadImage" src="./img/cat-0.png">
            <!-- <img id="cupheadImage" src="./cuphead.png"> -->
        </a-assets>

        <!-- <a-marker preset='hiro'> 
            <a-entity gltf-model="./scene.gltf" scale="1 1 1" rotation="0 90 270"></a-entity>
        </a-marker> -->
        <a-marker preset='hiro'>
            <a-entity position="0 0 0" rotation="270 0 0">
                <a-image src="#cupheadImage" scale="1.4 1 1"></a-image>
            </a-entity>
        </a-marker>

        <a-marker preset="pattern" type="pattern" url='./pattern-qr-code.patt'>
            <a-entity position="0 0 0" rotation="270 0 0">
                <a-image src="#cupheadImage" scale="1.4 1 1"></a-image>
            </a-entity>
        </a-marker>
        <!-- <a-marker preset="pattern" type="pattern" url='./pattern-qr-code.patt'>
            <a-entity gltf-model="./scene.gltf" scale="1 1 1"></a-entity>
        </a-marker> -->

        <a-entity camera></a-entity>
    </a-scene>

    <!-- <img class="image-sequence" src="./img/cat-0.png"></img> -->

    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>

    <script>
        var element = $('.image-sequence');
        var imagePath = './img/';
        var totalFrames = 60;
        var animationDuration = 1300;
        var timePerFrame = animationDuration / totalFrames;
        var timeWhenLastUpdate;
        var timeFromLastUpdate;
        var frameNumber = 0;

        function step() {
            element.attr('src', imagePath + `cat-${frameNumber}.png`);
            if (frameNumber >= totalFrames) {
                frameNumber = 1;
            } else {
                frameNumber = frameNumber + 1;
            }
        }

        $(window).on('load', function () {
            setInterval(function () {
                console.log('here');
                step();
            }, 75);
        });
    </script>
</body>

</html>